<link href="lib/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
<link href="lib/iCheck/skins/flat/green.css" rel="stylesheet">
<script type="text/javascript" src="lib/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="lib/bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="lib/iCheck/icheck.min.js"></script>
<script src="app/custom.js"></script>
<div class="">
	<div class="page-title">
		<div class="title_left">
			<h3>Customer Profile</h3>
		</div>
	</div>

	<div class="clearfix"></div>

	<div class="row">
		<div class="col-md-12 col-sm-12 col-xs-12">
			<div class="x_panel">
				<div class="x_title">
					<h2>Account Report</h2>
					<ul class="nav navbar-right panel_toolbox">
						<li>
							<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
							<ul class="dropdown-menu" role="menu">
								<li>
									<a href="#">Settings 1</a>
								</li>
								<li>
									<a href="#">Settings 2</a>
								</li>
							</ul>
						</li>
						<li>
							<a class="close-link"><i class="fa fa-close"></i></a>
						</li>
					</ul>
					<div class="clearfix"></div>
				</div>
				<div class="x_content">
					<div class="loading" ng-if="showLoader"></div>
					<div class="col-md-3 col-sm-3 col-xs-12 profile_left">
						<div class="profile_img">
							<div id="crop-avatar">
								<!-- Current avatar -->
								<img class="img-responsive avatar-view" src="../resources/assets/profile/company-name-vector-logo1.jpg" alt="Avatar" title="Change the avatar">
							</div>
						</div>
						<h3>{{customerName}}</h3>
						<div class="alignRight circleDiv" ng-if="State==2">
							<div class="circle"></div>
							<div class="circle"></div>
							<div class="circle"></div>
						</div>
						<div class="alignRight circleDiv" ng-if="State==3">
							<div class="circle"></div>
							<div class="redCircle"></div>
							<div class="whiteCircle"></div>
						</div>
						<div class="alignRight circleDiv" ng-if="State==1">
							<div class="redCircle"></div>
							<div class="whiteCircle"></div>
							<div class="whiteCircle"></div>
						</div>
						<div ng-if="!sendAuditorFlag">
							<div class="row" ng-if="!showRevoke">
								<div class="col-md-6 col-xs-6 col-sm-6">
									<button id="approve" class="app_rej sendDocs btn btn-success btn-sm" ng-click="approve()">
									Approve
									</button>
								</div>
								<div class="col-md-6 col-xs-6 col-sm-6">
									<button id="reject" class="app_rej sendDocs btn btn-success btn-sm" ng-click="reject()">
									Reject
									</button>
								</div>
							</div>
							<div class="row" ng-if="showRevoke">
								<div class="col-md-6 col-xs-6 col-sm-6">
									<button id="revoke" class="sendDocs btn btn-success btn-sm" ng-click="revoke()">
									Revoke
									</button>
								</div>
							</div>
						</div>
						<div class="row" ng-if="sendAuditorFlag">
							<div class="col-md-6 col-xs-6 col-sm-6 col-md-offset-3 col-xs-offset-2 col-sm-offset-2">
								<button id="sendDocs" class="btn btn-success btn-sm" ng-click="sendDocsAuditor()">
									Report to auditor
								</button>
							</div>
						</div>
					</div>
					<div class="col-md-9 col-sm-9 col-xs-12">
						<div class="profile_title">
							<div class="col-md-6">
								<h2>User Activity Report</h2>
							</div>
							<div class="col-md-6">
								<div id="reportrange" class="pull-right" style="margin-top: 5px; background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #E6E9ED">
									<i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
									<span>December 30, 2014 - January 28, 2015</span><b class="caret"></b>
								</div>
							</div>
						</div>
						<!-- start of user-activity-graph -->
						<div id="graph_bar" style="width:100%; height:280px;"></div>
						<!-- end of user-activity-graph -->

						<div class="" role="tabpanel" data-example-id="togglable-tabs">
							<ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
								<li role="presentation" ng-class="{'active': recentActivity==true}">
									<a id="home-tab" role="tab" data-toggle="tab" aria-expanded="true" ng-click="switchToRecentActivity()">Recent Activity</a>
								</li>
								<li role="presentation" ng-class="{'active': documents==true}">
									<a role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false" ng-click="switchToDocuments()">Documents</a>
								</li>
								<li role="presentation" ng-class="{'active': Ids==true}">
									<a role="tab" id="profile-tab2" data-toggle="tab" aria-expanded="false" ng-click="switchToIds()">IDs</a>
								</li>
							</ul>
							<div id="myTabContent" class="tab-content">
								<div role="tabpanel" class="tab-pane fade" ng-class="{'active in': recentActivity==true}" id="tab_content1" aria-labelledby="home-tab">

									<!-- start recent activity -->
									<ul class="messages">
										<li>
											<img src="../resources/assets/profile/img.jpg" class="avatar" alt="Avatar">
											<div class="message_date">
												<h3 class="date text-info">24</h3>
												<p class="month">
													May
												</p>
											</div>
											<div class="message_wrapper">
												<h4 class="heading">Desmond Davison</h4>
												<blockquote class="message">
													Raw denim you probably haven't heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua butcher retro keffiyeh dreamcatcher synth.
												</blockquote>
												<br />
												<p class="url">
													<span class="fs1 text-info" aria-hidden="true" data-icon=""></span>
													<a href="#"><i class="fa fa-paperclip"></i> User Acceptance Test.doc </a>
												</p>
											</div>
										</li>
										<li>
											<img src="../resources/assets/profile/img.jpg" class="avatar" alt="Avatar">
											<div class="message_date">
												<h3 class="date text-error">21</h3>
												<p class="month">
													May
												</p>
											</div>
											<div class="message_wrapper">
												<h4 class="heading">Brian Michaels</h4>
												<blockquote class="message">
													Raw denim you probably haven't heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua butcher retro keffiyeh dreamcatcher synth.
												</blockquote>
												<br />
												<p class="url">
													<span class="fs1" aria-hidden="true" data-icon=""></span>
													<a href="#" data-original-title="">Download</a>
												</p>
											</div>
										</li>
										<li>
											<img src="../resources/assets/profile/img.jpg" class="avatar" alt="Avatar">
											<div class="message_date">
												<h3 class="date text-info">24</h3>
												<p class="month">
													May
												</p>
											</div>
											<div class="message_wrapper">
												<h4 class="heading">Desmond Davison</h4>
												<blockquote class="message">
													Raw denim you probably haven't heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua butcher retro keffiyeh dreamcatcher synth.
												</blockquote>
												<br />
												<p class="url">
													<span class="fs1 text-info" aria-hidden="true" data-icon=""></span>
													<a href="#"><i class="fa fa-paperclip"></i> User Acceptance Test.doc </a>
												</p>
											</div>
										</li>
										<li>
											<img src="../resources/assets/profile/img.jpg" class="avatar" alt="Avatar">
											<div class="message_date">
												<h3 class="date text-error">21</h3>
												<p class="month">
													May
												</p>
											</div>
											<div class="message_wrapper">
												<h4 class="heading">Brian Michaels</h4>
												<blockquote class="message">
													Raw denim you probably haven't heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua butcher retro keffiyeh dreamcatcher synth.
												</blockquote>
												<br />
												<p class="url">
													<span class="fs1" aria-hidden="true" data-icon=""></span>
													<a href="#" data-original-title="">Download</a>
												</p>
											</div>
										</li>

									</ul>
									<!-- end recent activity -->

								</div>
								<div role="tabpanel" class="tab-pane fade" ng-class="{'active in': documents==true}" id="tab_content2" aria-labelledby="profile-tab">

									<!-- start user projects -->
									<div class="row">
										<div class="col-md-12">
											<div class="x_panel">
												<div class="x_title">
													<h2>Documents</h2>
													<ul class="nav navbar-right panel_toolbox">
														<li>
															<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
														</li>
														<li class="dropdown">
															<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
															<ul class="dropdown-menu" role="menu">
																<li>
																	<a href="#">Settings 1</a>
																</li>
																<li>
																	<a href="#">Settings 2</a>
																</li>
															</ul>
														</li>
														<li>
															<a class="close-link"><i class="fa fa-close"></i></a>
														</li>
													</ul>
													<div class="clearfix"></div>
												</div>
												<div class="x_content">

													<div class="row">

														<p>
															Documents
														</p>

														<div class="col-md-55" ng-repeat="doc in docs">
															<div class="thumbnail">
																<div class="image view view-first">
																	<img class="pdfIcon" style="width: 80%; display: block;" ng-src="{{getPath(doc.State)}}" alt="image" />
																	<div class="mask">
																		<p>
																			Your Text
																		</p>
																		<div class="tools tools-bottom">
																			<i class="fa fa-link" ng-click="openSuccessModal()"></i>
																			<a href="#"><i class="fa fa-pencil"></i></a>
																			<a href="#"><i class="fa fa-times"></i></a>
																		</div>
																	</div>
																</div>
																<div class="caption caption_font">
																	<p>
																		{{fileNameMapping[doc.DocType - 1]|| fileNameMapping[doc.Type - 1]}}
																	</p>
																</div>
															</div>
														</div>

													</div>

												</div>
											</div>
										</div>
									</div>
									<!-- end user projects -->
									<div id="successModal" class="modal fade" role="dialog">
										<div class="modal-dialog modal-sm">
											<!-- Modal content-->
											<div id="pdfModal" class="modal-content">
												<div class="modal-body">
													<div class="row">
														<div class="col-md-12 modal-container">

															<object data="/resources/assets/customerProfile/ARTICLE_OF_ASSOCIATION.pdf"
															type="application/pdf"
															width="500"
															height="300"
															data="yii.pdf#toolbar=1&amp;navpanes=0&amp;scrollbar=1&amp;page=1&amp;view=FitH"></object>
															<!--<iframe src="../resources/assets/customerProfile/Employee insurance.pdf"></iframe>-->
															<!--<i class="glyphicon glyphicon-ok-circle"></i><span class="message">{{popupContent}}</span>-->

														</div>
													</div>

												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-default" data-dismiss="modal">
														Ok
													</button>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div role="tabpanel" class="tab-pane fade" ng-class="{'active in': Ids==true}" id="tab_content3" aria-labelledby="profile-tab">
									<div class="table-responsive proofTable">
										<div class="loading" ng-if="showLoader"></div>
										<table id="mytable" class="table table-striped jambo_table bulk_action">
											<thead>
												<tr class="headings">
													<th>
													<input type="checkbox" id="check-all" class="flat">
													</th>
													<th class="column-title">Type </th>
													<th class="column-title">Valid Till Date </th>
													<th class="column-title">State </th>
													<th class="bulk-actions" colspan="7"><a class="antoo" style="color:#fff; font-weight:500;">Bulk Actions ( <span class="action-cnt"> </span> ) <i class="fa fa-chevron-down"></i></a></th>
												</tr>
											</thead>
											<tbody>

												<tr ng-repeat="x in table">
													<td><!--<input type="checkbox" class="checkthis" ng-model="x.selected"/>-->
													<input type="checkbox" class="flat" name="table_records" ng-model="x.selected">
													</td>
													<td>{{ x.Type }}</td>
													<td>{{ x.ValidTillDate }}</td>
													<td>{{ x.State }}</td>
												</tr>
											</tbody>
										</table>

										<div class="clearfix"></div>

									</div>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>

</div>
<!-- morris.js -->
<script src="lib/raphael/raphael.min.js"></script>
<script src="lib/morris.js/morris.min.js"></script>
<script src="lib/moment/min/moment.min.js"></script>
<script src="lib/bootstrap-daterangepicker/daterangepicker.js"></script>
<script>
	$(function() {
		Morris.Bar({
			element : 'graph_bar',
			data : [{
				"period" : "Jan",
				"Hours worked" : 80
			}, {
				"period" : "Feb",
				"Hours worked" : 125
			}, {
				"period" : "Mar",
				"Hours worked" : 176
			}, {
				"period" : "Apr",
				"Hours worked" : 224
			}, {
				"period" : "May",
				"Hours worked" : 265
			}, {
				"period" : "Jun",
				"Hours worked" : 314
			}, {
				"period" : "Jul",
				"Hours worked" : 347
			}, {
				"period" : "Aug",
				"Hours worked" : 287
			}, {
				"period" : "Sep",
				"Hours worked" : 240
			}, {
				"period" : "Oct",
				"Hours worked" : 211
			}],
			xkey : 'period',
			hideHover : 'auto',
			barColors : ['#26B99A', '#34495E', '#ACADAC', '#3498DB'],
			ykeys : ['Hours worked', 'sorned'],
			labels : ['Hours worked', 'SORN'],
			xLabelAngle : 60,
			resize : true
		});

		$MENU_TOGGLE.on('click', function() {
			$(window).resize();
		});
	});
</script>
<!-- datepicker -->
<script type="text/javascript">
	$(document).ready(function() {

		var cb = function(start, end, label) {
			console.log(start.toISOString(), end.toISOString(), label);
			$('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
			//alert("Callback has fired: [" + start.format('MMMM D, YYYY') + " to " + end.format('MMMM D, YYYY') + ", label = " + label + "]");
		}
		var optionSet1 = {
			startDate : moment().subtract(29, 'days'),
			endDate : moment(),
			minDate : '01/01/2012',
			maxDate : '12/31/2015',
			dateLimit : {
				days : 60
			},
			showDropdowns : true,
			showWeekNumbers : true,
			timePicker : false,
			timePickerIncrement : 1,
			timePicker12Hour : true,
			ranges : {
				'Today' : [moment(), moment()],
				'Yesterday' : [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
				'Last 7 Days' : [moment().subtract(6, 'days'), moment()],
				'Last 30 Days' : [moment().subtract(29, 'days'), moment()],
				'This Month' : [moment().startOf('month'), moment().endOf('month')],
				'Last Month' : [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
			},
			opens : 'left',
			buttonClasses : ['btn btn-default'],
			applyClass : 'btn-small btn-primary',
			cancelClass : 'btn-small',
			format : 'MM/DD/YYYY',
			separator : ' to ',
			locale : {
				applyLabel : 'Submit',
				cancelLabel : 'Clear',
				fromLabel : 'From',
				toLabel : 'To',
				customRangeLabel : 'Custom',
				daysOfWeek : ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
				monthNames : ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
				firstDay : 1
			}
		};
		$('#reportrange span').html(moment().subtract(29, 'days').format('MMMM D, YYYY') + ' - ' + moment().format('MMMM D, YYYY'));
		$('#reportrange').daterangepicker(optionSet1, cb);
		$('#reportrange').on('show.daterangepicker', function() {
			console.log("show event fired");
		});
		$('#reportrange').on('hide.daterangepicker', function() {
			console.log("hide event fired");
		});
		$('#reportrange').on('apply.daterangepicker', function(ev, picker) {
			console.log("apply event fired, start/end dates are " + picker.startDate.format('MMMM D, YYYY') + " to " + picker.endDate.format('MMMM D, YYYY'));
		});
		$('#reportrange').on('cancel.daterangepicker', function(ev, picker) {
			console.log("cancel event fired");
		});
		$('#options1').click(function() {
			$('#reportrange').data('daterangepicker').setOptions(optionSet1, cb);
		});
		$('#options2').click(function() {
			$('#reportrange').data('daterangepicker').setOptions(optionSet2, cb);
		});
		$('#destroy').click(function() {
			$('#reportrange').data('daterangepicker').remove();
		});
	});
</script>
<!-- /datepicker -->

<script type="text/javascript">
	function openFailureModal() {
		$("#failureModal").modal("show");
	}

</script>
